# Template file for 'python3-lsp-server'
pkgname=python3-lsp-server
version=1.3.3
revision=1
wrksrc="python-lsp-server-${version}"
build_style=python3-module
makedepends="python3-setuptools"
depends="python3 python3-jedi python3-lsp-jsonrpc python3-pluggy python3-ultrajson python3-flaky python-pycodestyle"
checkdepends="python3-pytest ${depends}"
short_desc="Python LSP Server"
maintainer="DragonGhost7 <darkiridiumghost@gmail.com>"
license="MIT"
homepage="https://github.com/python-lsp/python-lsp-server"
distfiles="${PYPI_SITE}/p/python-lsp-server/python-lsp-server-${version}.tar.gz"
checksum=1b48ccd8b70103522e8a8b9cb9ae1be2b27a5db0dfd661e7e44e6253ebefdc40

post_extract() {
	sed "s|'pylint>=2.5.0,<2.10.0'|'pylint<=2.11.1'|" -i setup.py
}

pre_check() {
#we do not need to do a coverage test
sed -e '/addopts/,+3d' -i setup.cfg
rm -r test/plugins/
}

post_install() {
vlicense LICENSE
}
