# Template file for 'python3-abydos'
pkgname=python3-abydos
version=0.5.0
revision=1
wrksrc="abydos-${version}"
build_style=python3-module
hostmakedepends="python3-setuptools"
depends="python3 python3-numpy"
checkdepends="python3-pytest python3-deprecation ${depends}"
short_desc="NLP/IR library for Python"
maintainer="DragonGhost7 <darkiridiumghost@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/chrislit/abydos"
distfiles="${homepage}/archive/refs/tags/v${version}.tar.gz"
checksum=0d46be1a40cfcdcd9ff9d052828c6ea57f5e1e2378373761c963c4a0cfcc5512

post_extract() {
 sed -i 's/from collections import Iterable/from collections.abc import Iterable/g' abydos/distance/_synoname.py
 sed -i 's/from collections import Iterable/from collections.abc import Iterable/g' abydos/tokenizer/_q_skipgrams.py
 sed -i 's/from collections import Iterable/from collections.abc import Iterable/g' abydos/tokenizer/_q_grams.py

 #no updates in upstream means that import from collections doesnt work anymore, has to be changed.
}

do_check() {
	rm setup.cfg
	pytest
}
