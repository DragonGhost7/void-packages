# Template file for 'python3-cloudpickle'
pkgname=python3-cloudpickle
version=2.0.0
revision=1
archs="x86_64"
wrksrc="cloudpickle-${version}"
build_style=python3-module
hostmakedepends="python-setuptools"
depends="python3"
checkdepends="python3-pytest python3-psutil python3-tornado python3-numpy"
short_desc="Extended pickling support for Python objects"
maintainer="DragonGhost7 <darkiridiumghost@gmail.com>"
license="BSD-3-Clause"
homepage="https://github.com/cloudpipe/cloudpickle"
distfiles="${PYPI_SITE}/c/cloudpickle/cloudpickle-${version}.tar.gz"
checksum=5cd02f3b417a783ba84a4ec3e290ff7929009fe51f6405423cfccfadd43ba4a4

do_check() {
cd tests/cloudpickle_testpkg
python setup.py build
cd ../../
	PYTHONPATH="tests/cloudpickle_testpkg/build/lib" \
pytest --deselect tests/cloudpickle_file_test.py::CloudPickleFileTests::test_pickling_special_file_handles \
--deselect tests/cloudpickle_test.py::CloudPickleTest::test_pickling_file_handles \
--deselect tests/cloudpickle_test.py::Protocol2CloudPickleTest::test_pickling_file_handles
}

post_install() {
	vlicense LICENSE
}
